<!DOCTYPE html>
<html>

<head>
	<title>Post Something</title>>
	<link href='https://unpkg.com/boxicons@2.1.2/css/boxicons.min.css' rel='stylesheet'>
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet"
		integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD" crossorigin="anonymous">
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"
		integrity="sha384-w76AqPfDkMBDXo30jS1Sgez6pr3x5MlQ1ZAGC+nuZB+EYdgRZgiwxhTBTkF7CXvN"
		crossorigin="anonymous"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

	<style>
		body {
			font-family: Arial, sans-serif;
			background-color: #f3f2ef;
			color: #000;
			margin: 0;
			padding: 0;
		}

		/* Add a container with a max-width to center the content */
		.container {
			max-width: 1100px;
			margin: 0 auto;
			padding: 0 15px;
		}

		/* Style the header */
		header {
			background-color: #fff;
			box-shadow: 0px 2px 6px rgba(0, 0, 0, 0.1);
			position: fixed;
			top: 0;
			left: 0;
			right: 0;
			z-index: 1;
		}

		/* Style the navigation links */
		nav ul {
			list-style: none;
			margin: 0;
			padding: 0;
			display: flex;
		}

		nav li {
			margin-right: 20px;
		}

		nav a {
			color: #0077B5;
			text-decoration: none;
			font-weight: bold;
			font-size: 14px;
			line-height: 20px;
			padding: 12px 0;
			display: inline-block;
			transition: all 0.2s ease-in-out;
		}

		nav a:hover {
			color: #0a66c2;
		}



		/* Style the user profile details */


		/* Style the user profile footer */
		footer {
			background-color: #fff;
			box-shadow: 0px -2px 6px rgba(0, 0, 0, 0.1);
			padding: 20px 0;
			text-align: center;
			margin-top: 140px;

		}

		footer p {
			margin: 0;
			font-size: 14px;
			color: #707070;

		}




		nav {
			-webkit-box-shadow: 0 4px 11.5px 2.5px #dddddd;
			-moz-box-shadow: 0 4px 11.5px 2.5px #dddddd;
			box-shadow: 0 4px 11.5px 2.5px #dddddd;
		}

		#brand_img {
			width: 60px;
			height: 71px;
		}

		.title {
			display: flex;
			justify-content: center;
			align-items: center;
		}

		.title>h2 {
			color: rgb(34, 3, 212);
			/* color: #3F51B5; */
			font-family: 'Cormorant Garamond', 'Times New Roman';
			font-size: 38px;
			font-weight: 500;
		}

		.nav_items {
			display: flex;
			gap: 40px;
		}

		.nav_texts {
			color: rgb(34, 3, 212);
			font-size: 20px;
			text-decoration: none;
			font-weight: 500;
			transform: 1s;
			padding: 6px;
		}

		nav ul li a,
		nav ul li a:after,
		nav ul li a:before {
			transition: all .5s;
		}

		nav ul li a:hover {
			color: rgb(25, 15, 53);
		}


		/* stroke */
		nav.stroke ul li a,
		nav.fill ul li a {
			position: relative;
		}

		nav.stroke ul li a:after,
		nav.fill ul li a:after {
			position: absolute;
			bottom: 0;
			left: 0;
			right: 0;
			margin: auto;
			width: 0%;
			content: '.';
			color: transparent;
			background: rgb(255, 255, 255);
			height: 3px;
		}

		nav.stroke ul li a:hover:after {
			width: 100%;
			background: rgb(126, 77, 250);
		}

		/* ============================================================================
============================================================================ */
		main {
			max-width: 800px;
			margin: 0 auto;
			padding: 20px;
		}

		form {
			margin-top: 65px;
		}

		form label {
			display: block;
			margin-top: 20px;
			font-size: 18px;
			font-weight: bold;
		}

		form textarea {
			display: block;
			width: 100%;
			padding: 10px;
			margin-top: 5px;
			margin-bottom: 20px;
			border-radius: 5px;
			border: 1px solid #ccc;
			resize: vertical;
		}

		form input[type="text"] {
			margin-top: 5px;
			width: 100%;
			margin-bottom: 10px;
		}



		form button[type="submit"] {
			display: block;
			background-color: #0072b1;
			color: white;
			padding: 10px;
			margin-top: 20px;
			border: none;
			border-radius: 5px;
			cursor: pointer;
			margin: 0 auto;
			width: 100%;
		}

		form button[type="submit"]:hover {
			background-color: #2D4373;
		}
	</style>
</head>

<body>
	<nav class="navbar navbar-expand-lg bg-light  fixed-top stroke">
		<div class="container-fluid">
			<a class="navbar-brand" href="#">
				<div style="display: flex; flex-direction: row;">
					<img src="SISTec_Logo.png" alt="Logo" class="d-inline-block align-text-center" id="brand_img">
					<div class="title">
						<h2>SISTec-Connect</h2>
					</div>
				</div>
			</a>
			<button class="navbar-toggler" type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasNavbar"
				aria-controls="offcanvasNavbar">
				<span class="navbar-toggler-icon"></span>
			</button>
			<div class="offcanvas offcanvas-end" tabindex="-1" id="offcanvasNavbar"
				aria-labelledby="offcanvasNavbarLabel">
				<div class="offcanvas-header">
					<h5 class="offcanvas-title" id="offcanvasNavbarLabel"></h5>
					<button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
				</div>
				<div class="offcanvas-body">
					<ul class="navbar-nav justify-content-end flex-grow-1 pe-5 nav_items">
						<li class="nav-item">
							<i class='bx bxs-home' style='color:#2203d4'></i>
							<a class="nav_texts act home" aria-current="page" href="#">Home</a>
						</li>

						<li class="nav-item">
							<i class='bx bxs-message-dots' style='color:#2203d4'></i>
							<a class="nav_texts" href="#">Message</a>
						</li>
						<li class="nav-item">
							<i class='bx bxs-bell' style='color:#2203d4'></i>
							<a class="nav_texts" aria-current="page" href="#">Notification</a>
						</li>
						<li class="nav-item">
							<i class='bx bxs-user' style='color:#2203d4'></i>
							<a class="nav_texts profile">Profile</a>
						</li>
						<li class="nav-item">
							<i class='bx bxs-log-out' style='color:#2203d4'></i>
							<a class="nav_texts" href="/logout" type="submit">Logout</a>
						</li>
					</ul>
				</div>
			</div>
		</div>
	</nav>
	<main>
		<form>
			<label for="desc">What's on your mind?</label>
			<textarea id="desc" name="desc" rows="5" required></textarea>

			<label for="post-image">image</label>
			<input type="text" id="img" name="img">

			<button type="submit">Post</button>
		</form>
	</main>

	<footer>
		<p>&copy; 2023 SISTec</p>
	</footer>
	<script>

		var currentUrl = window.location.href
		var pathParts = currentUrl.split('/');
		var User= pathParts[pathParts.length - 1];

		// 

		//console.log(userId)
		$(document).ready(function () {
			$('.home').click(function () {
				// console.log('working')
				window.location.href = `/Feed2?userD=${User}`;
				//console.log(userId)
			});

		})
	</script>




	const form = document.querySelector('form');

	form.addEventListener('submit', async (e) => {
	e.preventDefault();

	const desc = document.getElementById('desc').value;
	const img = document.getElementById('img').value;
	const path = window.location.pathname;

	const segments = path.split('/');


	const userId = segments[segments.length - 1];

	try {
	const response = await fetch('http://localhost:8000/posts', {
	method: 'POST',
	headers: { 'Content-Type': 'application/json' },
	body: JSON.stringify({ userId, desc, img })
	});

	const data = await response.json();
	console.log(data); // log the saved post to the console

	form.reset();
	alert('Post created successfully!');
	} catch (err) {
	console.error(err);
	alert('Failed to create post');
	}
	});

	</script>
</body>

</html>